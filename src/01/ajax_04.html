<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>处理IE浏览器 GET请求缓存问题</title>
    <link rel="stylesheet" href="./ajax.css">
</head>

<body>
    <h3>处理IE浏览器 GET请求缓存问题</h3>
    <p>原生ajax请求的写法</p>
    <p>[---原因是因为协商缓存---]</p>
    <button id="btn01">点击</button><br><br>
    <div class="content"></div>
</body>

</html>
<script>
    const btn01 = document.getElementById('btn01');
    const content = document.getElementsByClassName('content')[0];
    const xhr = new XMLHttpRequest();
    btn01.onclick = function(){
        xhr.onreadystatechange = function(){
            if(xhr.readyState===4 && (xhr.status>=200 && xhr.status<300)){
                console.log(xhr.response);
                // const {name,age,gender,songs} = xhr.response;
                // content.innerHTML = (`
                //                         <ul>
                //                             <li>姓名:${name}</li>
                //                             <li>年龄:${age}</li>
                //                             <li>性别:${gender}</li>
                //                             <li>歌曲:${songs}</li>
                //                         </ul>
                //                     `)
            }
        }

        //xhr.responseType = 'json';//设置响应回来的数据格式

        //xhr.setRequestHeader();//设置请求的格式 一般是POST方法为请求体设置的

        xhr.open('GET','http://127.0.0.1:8080/test_ie?t='+Date.now());//设置请求的method  url


        xhr.send();//发送请求 或者携带请求体参数发送请求

        
    }
</script>